@using Frontend.Services
@inject NavigationManager Nav
@inject AuthService Auth

<div class="topbar">
    <div class="topbar-left">
        @if (Mode == TopBarMode.Dashboard)
        {
            <span class="welcome-text">Velkommen, @Auth.UserName</span>
        }
        else if (Mode == TopBarMode.Login)
        {
            <span class="login-text">LOGIN</span>
        }
        else if (Mode == TopBarMode.Register)
        {
            <span class="login-text">REGISTER</span>
        }
        else
        {
            <img src="images/Logo.png" alt="Bank Logo" class="logo" />
        }
    </div>

    <div class="topbar-right">
        @if (Mode == TopBarMode.Home)
        {
            @if (!Auth.IsLoggedIn)
            {
                <button class="btn" @onclick='() => Nav.NavigateTo("/login")'>LOGIN</button>
                <button class="btn" @onclick='() => Nav.NavigateTo("/register")'>REGISTER</button>
            }
            else
            {
                <span class="welcome-text">Hej, @Auth.UserName!</span>
                <button class="btn" @onclick="LogOut">LOGUD</button>
            }
        }
        else if (Mode == TopBarMode.Login)
        {
            <button class="btn" @onclick='() => Nav.NavigateTo("/")'>ANNULLER</button>
        }
        else if (Mode == TopBarMode.Register)
        {
            <button class="btn" @onclick='() => Nav.NavigateTo("/")'>ANNULLER</button>
        }
        else if (Mode == TopBarMode.Dashboard)
        {
            <button class="btn" @onclick="LogOut">LOGUD</button>
        }
    </div>
</div>

@code {
    [Parameter]
    public TopBarMode Mode { get; set; } = TopBarMode.Default;

    void LogOut()
    {
        Auth.IsLoggedIn = false;
        Auth.UserName = "";
        Nav.NavigateTo("/");
    }

    public enum TopBarMode
    {
        Default,
        Home,
        Login,
        Register,
        Dashboard
    }
}
