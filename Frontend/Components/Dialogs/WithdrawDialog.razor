@code {
    [Parameter] public bool Show { get; set; }
    [Parameter] public EventCallback OnClose { get; set; }
    [Parameter] public decimal CurrentBalance { get; set; }
    [Parameter] public EventCallback<decimal> OnWithdraw { get; set; }

    private decimal Amount { get; set; }

    private async Task ConfirmWithdraw()
    {
        if (Amount > 0 && Amount <= CurrentBalance)
        {
            await OnWithdraw.InvokeAsync(Amount);
            await OnClose.InvokeAsync();
        }
    }

    private async Task Cancel()
    {
        await OnClose.InvokeAsync();
    }
}

@if (Show)
{
    <div class="popup-overlay" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;justify-content:center;align-items:center;">
        <div class="popup-card" style="background:white;padding:2rem;border-radius:8px;min-width:300px;">
            <h2>Hæv beløb</h2>
            <p>Din saldo: <strong>@CurrentBalance.ToString("C", new System.Globalization.CultureInfo("da-DK"))</strong></p>

            <input type="number" min="0" step="0.01" @bind="Amount" placeholder="Indtast beløb" style="width:100%;padding:0.5rem;margin:1rem 0;" />

            <div style="display:flex;justify-content:space-between;">
                <button @onclick="Cancel" style="padding:0.5rem 1rem;background:#ccc;border:none;border-radius:4px;cursor:pointer;">Annuller</button>
                <button @onclick="ConfirmWithdraw" style="padding:0.5rem 1rem;background:#1a73e8;color:white;border:none;border-radius:4px;cursor:pointer;">Hæv</button>
            </div>
        </div>
    </div>
}


